{"ast":null,"code":"export default {\n  props: {\n    pokemon: {\n      type: Object,\n      required: true\n    }\n  },\n  data() {\n    return {\n      currentSprite: this.pokemon.sprite,\n      topMoves: [],\n      isFavorited: false // Status favorit\n    };\n  },\n  computed: {\n    pokemonCry() {\n      return `https://play.pokemonshowdown.com/audio/cries/${this.pokemon.name}.mp3`;\n    }\n  },\n  methods: {\n    async fetchTopMoves() {\n      const response = await fetch(`https://pokeapi.co/api/v2/pokemon/${this.pokemon.id}`);\n      const data = await response.json();\n      this.topMoves = data.moves.slice(0, 4);\n    },\n    async markAsFavorite() {\n      if (this.isFavorited) return;\n      const token = localStorage.getItem('token');\n      if (!token) {\n        alert('Token tidak ditemukan. Anda harus login terlebih dahulu.');\n        return;\n      }\n      try {\n        // Mengirim request untuk menambahkan Pokémon ke favorit\n        const response = await fetch('http://localhost:3000/favorite-pokemons', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n          },\n          body: JSON.stringify({\n            pokemonId: this.pokemon.id\n          })\n        });\n        const data = await response.json();\n        if (response.ok) {\n          this.isFavorited = true; // Tandai sebagai favorit\n          alert('Pokémon berhasil ditambahkan ke favorit!');\n        } else {\n          alert('Gagal menambahkan Pokémon ke favorit: ' + data.message);\n        }\n      } catch (err) {\n        console.error('Error adding to favorites:', err);\n        alert('Terjadi kesalahan saat menambahkan Pokémon ke favorit.');\n      }\n    },\n    switchPokemon(direction) {\n      this.$emit('switch', direction);\n    }\n  },\n  watch: {\n    pokemon: {\n      immediate: true,\n      handler(newPokemon) {\n        this.currentSprite = newPokemon.sprite; // Update sprite saat Pokémon berubah\n        this.fetchTopMoves(); // Fetch moves baru saat Pokémon berubah\n        // computed property pokemonCry akan otomatis mereturn URL cry yang baru\n        this.isFavorited = false; // Reset favorit jika Pokémon berubah\n      }\n    }\n  }\n};","map":{"version":3,"names":["props","pokemon","type","Object","required","data","currentSprite","sprite","topMoves","isFavorited","computed","pokemonCry","name","methods","fetchTopMoves","response","fetch","id","json","moves","slice","markAsFavorite","token","localStorage","getItem","alert","method","headers","body","JSON","stringify","pokemonId","ok","message","err","console","error","switchPokemon","direction","$emit","watch","immediate","handler","newPokemon"],"sources":["/Users/hares/Downloads/vue-exp-8-sementara/client/src/components/PopUp.vue"],"sourcesContent":["<template>\r\n    <div class=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 transition-opacity duration-300 ease-in-out\">\r\n        <div class=\"bg-white rounded-lg shadow-lg p-6 w-11/12 md:w-1/2 text-center transform transition-transform duration-300 ease-in-out scale-100\">\r\n            <div class=\"flex justify-between items-center mb-4\">\r\n                <h2 class=\"text-2xl font-bold text-gray-800\">\r\n                    {{ pokemon.id }} - {{ pokemon.name }}\r\n                </h2>\r\n                <button @click=\"$emit('close')\" class=\"text-red-500 hover:text-red-700 transition duration-200\">\r\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\r\n                    </svg>\r\n                </button>\r\n            </div>\r\n            <img :src=\"currentSprite\" :alt=\"pokemon.name\" class=\"sprite my-4 mx-auto rounded-full border-4 border-gray-200 shadow-md\" />\r\n\r\n            <div class=\"flex justify-center mb-4 text-gray-700\">\r\n                <p class=\"mr-4\"><strong>Height:</strong> {{ pokemon.height }} m</p>\r\n                <p><strong>Weight:</strong> {{ pokemon.weight }} kg</p>\r\n            </div>\r\n            <div class=\"mb-4\">\r\n                <p class=\"text-lg font-semibold text-gray-800\"><strong>Abilities:</strong></p>\r\n                <ul class=\"flex space-x-2 justify-center\">\r\n                    <li v-for=\"ability in pokemon.abilities\" :key=\"ability.ability.name\"\r\n                        class=\"bg-gray-200 rounded px-2 py-1 shadow-sm\">\r\n                        {{ ability.ability.name }}\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div class=\"mb-4\">\r\n                <p class=\"text-lg font-semibold text-gray-800\"><strong>Top 4 Moves Learned:</strong></p>\r\n                <ul class=\"flex space-x-2 justify-center\">\r\n                    <li v-for=\"move in topMoves\" :key=\"move.move.name\" class=\"bg-gray-200 rounded px-2 py-1 shadow-sm\">\r\n                        {{ move.move.name }}\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div class=\"mb-4\">\r\n                <p class=\"text-lg font-semibold text-gray-800\"><strong>Types:</strong></p>\r\n                <ul class=\"flex space-x-2 justify-center\">\r\n                    <li v-for=\"type in pokemon.types\" :key=\"type.type.name\" class=\"bg-gray-200 rounded px-2 py-1 shadow-sm\">\r\n                        {{ type.type.name }}\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <div class=\"mb-4\">\r\n                <p class=\"text-lg font-semibold text-gray-800\"><strong>Cry:</strong></p>\r\n                <div class=\"flex justify-center\">\r\n                    <audio controls :src=\"pokemonCry\" type=\"audio/mpeg\" class=\"rounded shadow-sm\">\r\n                        Your browser does not support the audio element.\r\n                    </audio>\r\n                </div>\r\n            </div>\r\n\r\n            <!-- Navigation Buttons -->\r\n            <div class=\"flex justify-center items-center space-x-4 my-4\">\r\n                <button @click=\"switchPokemon('previous')\"\r\n                    class=\"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-700 transition duration-200 shadow-md\">\r\n                    Previous\r\n                </button>\r\n                <button @click=\"switchPokemon('next')\"\r\n                    class=\"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-700 transition duration-200 shadow-md\">\r\n                    Next\r\n                </button>\r\n            </div>\r\n\r\n            <!-- Tombol Favorit -->\r\n            <button @click=\"markAsFavorite\"\r\n                :class=\"{\r\n                    'bg-green-500': !isFavorited,\r\n                    'bg-gray-400': isFavorited,\r\n                }\"\r\n                class=\"mt-4 px-4 py-2 text-white rounded hover:bg-green-700 transition duration-200\"\r\n                :disabled=\"isFavorited\">\r\n                {{ isFavorited ? 'Favorited' : 'Favorite' }}\r\n            </button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    props: {\r\n        pokemon: {\r\n            type: Object,\r\n            required: true,\r\n        },\r\n    },\r\n    data() {\r\n        return {\r\n            currentSprite: this.pokemon.sprite,\r\n            topMoves: [],\r\n            isFavorited: false, // Status favorit\r\n        };\r\n    },\r\n    computed: {\r\n        pokemonCry() {\r\n            return `https://play.pokemonshowdown.com/audio/cries/${this.pokemon.name}.mp3`;\r\n        },\r\n    },\r\n    methods: {\r\n        async fetchTopMoves() {\r\n            const response = await fetch(`https://pokeapi.co/api/v2/pokemon/${this.pokemon.id}`);\r\n            const data = await response.json();\r\n            this.topMoves = data.moves.slice(0, 4); \r\n        },\r\n        async markAsFavorite() {\r\n            if (this.isFavorited) return;\r\n\r\n            const token = localStorage.getItem('token');\r\n            \r\n            if (!token) {\r\n                alert('Token tidak ditemukan. Anda harus login terlebih dahulu.');\r\n                return;\r\n            }\r\n\r\n            try {\r\n                // Mengirim request untuk menambahkan Pokémon ke favorit\r\n                const response = await fetch('http://localhost:3000/favorite-pokemons', {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'Authorization': `Bearer ${token}`, \r\n                    },\r\n                    body: JSON.stringify({ pokemonId: this.pokemon.id }),\r\n                });\r\n\r\n                const data = await response.json();\r\n                if (response.ok) {\r\n                    this.isFavorited = true; // Tandai sebagai favorit\r\n                    alert('Pokémon berhasil ditambahkan ke favorit!');\r\n                } else {\r\n                    alert('Gagal menambahkan Pokémon ke favorit: ' + data.message);\r\n                }\r\n            } catch (err) {\r\n                console.error('Error adding to favorites:', err);\r\n                alert('Terjadi kesalahan saat menambahkan Pokémon ke favorit.');\r\n            }\r\n        },\r\n\r\n        switchPokemon(direction) {\r\n            this.$emit('switch', direction);\r\n        },\r\n    },\r\n    watch: {\r\n        pokemon: {\r\n            immediate: true,\r\n            handler(newPokemon) {\r\n                this.currentSprite = newPokemon.sprite; // Update sprite saat Pokémon berubah\r\n                this.fetchTopMoves(); // Fetch moves baru saat Pokémon berubah\r\n                // computed property pokemonCry akan otomatis mereturn URL cry yang baru\r\n                this.isFavorited = false; // Reset favorit jika Pokémon berubah\r\n            },\r\n        },\r\n    },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.fixed {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n}\r\n\r\n.sprite {\r\n    width: 3cm;\r\n    height: 3cm;\r\n    object-fit: contain;\r\n}\r\n\r\n.favorite-btn {\r\n    cursor: pointer;\r\n}\r\n\r\n.popup-overlay {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: rgba(0, 0, 0, 0.7);\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    z-index: 50;\r\n}\r\n\r\n.popup-content {\r\n    background: white;\r\n    padding: 20px;\r\n    border-radius: 8px;\r\n    width: 300px;\r\n    max-width: 90%;\r\n    text-align: center;\r\n    position: relative;\r\n}\r\n\r\n.close-btn {\r\n    position: absolute;\r\n    top: 10px;\r\n    right: 10px;\r\n    background: transparent;\r\n    border: none;\r\n    font-size: 1.5rem;\r\n    cursor: pointer;\r\n}\r\n</style>"],"mappings":"AAgFA,eAAe;EACXA,KAAK,EAAE;IACHC,OAAO,EAAE;MACLC,IAAI,EAAEC,MAAM;MACZC,QAAQ,EAAE;IACd;EACJ,CAAC;EACDC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,aAAa,EAAE,IAAI,CAACL,OAAO,CAACM,MAAM;MAClCC,QAAQ,EAAE,EAAE;MACZC,WAAW,EAAE,KAAK,CAAE;IACxB,CAAC;EACL,CAAC;EACDC,QAAQ,EAAE;IACNC,UAAUA,CAAA,EAAG;MACT,OAAO,gDAAgD,IAAI,CAACV,OAAO,CAACW,IAAI,MAAM;IAClF;EACJ,CAAC;EACDC,OAAO,EAAE;IACL,MAAMC,aAAaA,CAAA,EAAG;MAClB,MAAMC,QAAO,GAAI,MAAMC,KAAK,CAAC,qCAAqC,IAAI,CAACf,OAAO,CAACgB,EAAE,EAAE,CAAC;MACpF,MAAMZ,IAAG,GAAI,MAAMU,QAAQ,CAACG,IAAI,CAAC,CAAC;MAClC,IAAI,CAACV,QAAO,GAAIH,IAAI,CAACc,KAAK,CAACC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;IAC1C,CAAC;IACD,MAAMC,cAAcA,CAAA,EAAG;MACnB,IAAI,IAAI,CAACZ,WAAW,EAAE;MAEtB,MAAMa,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAE3C,IAAI,CAACF,KAAK,EAAE;QACRG,KAAK,CAAC,0DAA0D,CAAC;QACjE;MACJ;MAEA,IAAI;QACA;QACA,MAAMV,QAAO,GAAI,MAAMC,KAAK,CAAC,yCAAyC,EAAE;UACpEU,MAAM,EAAE,MAAM;UACdC,OAAO,EAAE;YACL,cAAc,EAAE,kBAAkB;YAClC,eAAe,EAAE,UAAUL,KAAK;UACpC,CAAC;UACDM,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;YAAEC,SAAS,EAAE,IAAI,CAAC9B,OAAO,CAACgB;UAAG,CAAC;QACvD,CAAC,CAAC;QAEF,MAAMZ,IAAG,GAAI,MAAMU,QAAQ,CAACG,IAAI,CAAC,CAAC;QAClC,IAAIH,QAAQ,CAACiB,EAAE,EAAE;UACb,IAAI,CAACvB,WAAU,GAAI,IAAI,EAAE;UACzBgB,KAAK,CAAC,0CAA0C,CAAC;QACrD,OAAO;UACHA,KAAK,CAAC,wCAAuC,GAAIpB,IAAI,CAAC4B,OAAO,CAAC;QAClE;MACJ,EAAE,OAAOC,GAAG,EAAE;QACVC,OAAO,CAACC,KAAK,CAAC,4BAA4B,EAAEF,GAAG,CAAC;QAChDT,KAAK,CAAC,wDAAwD,CAAC;MACnE;IACJ,CAAC;IAEDY,aAAaA,CAACC,SAAS,EAAE;MACrB,IAAI,CAACC,KAAK,CAAC,QAAQ,EAAED,SAAS,CAAC;IACnC;EACJ,CAAC;EACDE,KAAK,EAAE;IACHvC,OAAO,EAAE;MACLwC,SAAS,EAAE,IAAI;MACfC,OAAOA,CAACC,UAAU,EAAE;QAChB,IAAI,CAACrC,aAAY,GAAIqC,UAAU,CAACpC,MAAM,EAAE;QACxC,IAAI,CAACO,aAAa,CAAC,CAAC,EAAE;QACtB;QACA,IAAI,CAACL,WAAU,GAAI,KAAK,EAAE;MAC9B;IACJ;EACJ;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}