{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  key: 0,\n  class: \"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50\"\n};\nconst _hoisted_2 = {\n  class: \"bg-white p-6 rounded-lg shadow-lg w-96\"\n};\nconst _hoisted_3 = {\n  class: \"flex justify-between items-center mb-4\"\n};\nconst _hoisted_4 = {\n  class: \"text-2xl font-bold\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"mb-4\"\n};\nconst _hoisted_6 = {\n  key: 1,\n  class: \"mb-4\"\n};\nconst _hoisted_7 = {\n  class: \"mb-4\"\n};\nconst _hoisted_8 = {\n  class: \"mb-4\"\n};\nconst _hoisted_9 = {\n  class: \"mb-4\"\n};\nconst _hoisted_10 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return $props.isVisible ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"h2\", _hoisted_4, _toDisplayString($options.formatMoveName($props.move)), 1 /* TEXT */), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.close && $options.close(...args)),\n    class: \"text-xl text-red-500 hover:text-red-700 focus:outline-none\"\n  }, \" × \")]), $props.move.description ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createElementVNode(\"p\", null, [_cache[2] || (_cache[2] = _createElementVNode(\"strong\", null, \"Description:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString($props.move.description), 1 /* TEXT */)])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_6, _cache[3] || (_cache[3] = [_createElementVNode(\"p\", null, [_createElementVNode(\"strong\", null, \"Description:\"), _createTextVNode(\" No description available.\")], -1 /* HOISTED */)]))), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"p\", null, [_cache[4] || (_cache[4] = _createElementVNode(\"strong\", null, \"Type:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString($props.move.type || 'N/A'), 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"p\", null, [_cache[5] || (_cache[5] = _createElementVNode(\"strong\", null, \"Power:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString($props.move.power !== null ? $props.move.power : 'N/A'), 1 /* TEXT */)])]), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"p\", null, [_cache[6] || (_cache[6] = _createElementVNode(\"strong\", null, \"Accuracy:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString($props.move.accuracy !== null ? $props.move.accuracy : 'N/A'), 1 /* TEXT */)])]), _createCommentVNode(\" Tombol Favorit \"), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.markAsFavorite && $options.markAsFavorite(...args)),\n    class: _normalizeClass([{\n      'bg-green-500': !$data.isFavorited,\n      'bg-gray-400': $data.isFavorited\n    }, \"mt-4 px-4 py-2 text-white rounded hover:bg-green-700 transition duration-200\"]),\n    disabled: $data.isFavorited\n  }, _toDisplayString($data.isFavorited ? 'Favorited' : 'Favorite'), 11 /* TEXT, CLASS, PROPS */, _hoisted_10)])])) : _createCommentVNode(\"v-if\", true);\n}","map":{"version":3,"names":["key","class","$props","isVisible","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","$options","formatMoveName","move","onClick","_cache","args","close","description","_hoisted_5","_createTextVNode","_hoisted_6","_hoisted_7","type","_hoisted_8","power","_hoisted_9","accuracy","_createCommentVNode","markAsFavorite","_normalizeClass","$data","isFavorited","disabled","_hoisted_10"],"sources":["/Users/hares/Downloads/vue-exp-8-sementara/client/src/components/MoveDetailPopup.vue"],"sourcesContent":["<template>\r\n  <div \r\n    v-if=\"isVisible\" \r\n    class=\"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50\"\r\n  >\r\n    <div class=\"bg-white p-6 rounded-lg shadow-lg w-96\">\r\n      <div class=\"flex justify-between items-center mb-4\">\r\n        <h2 class=\"text-2xl font-bold\">{{ formatMoveName(move) }}</h2>\r\n        <button \r\n          @click=\"close\" \r\n          class=\"text-xl text-red-500 hover:text-red-700 focus:outline-none\"\r\n        >\r\n          ×\r\n        </button>\r\n      </div>\r\n\r\n      <div v-if=\"move.description\" class=\"mb-4\">\r\n        <p><strong>Description:</strong> {{ move.description }}</p>\r\n      </div>\r\n      <div v-else class=\"mb-4\">\r\n        <p><strong>Description:</strong> No description available.</p>\r\n      </div>\r\n\r\n      <div class=\"mb-4\">\r\n        <p><strong>Type:</strong> {{ move.type || 'N/A' }}</p>\r\n      </div>\r\n      <div class=\"mb-4\">\r\n        <p><strong>Power:</strong> {{ move.power !== null ? move.power : 'N/A' }}</p>\r\n      </div>\r\n      <div class=\"mb-4\">\r\n        <p><strong>Accuracy:</strong> {{ move.accuracy !== null ? move.accuracy : 'N/A' }}</p>\r\n      </div>\r\n\r\n      <!-- Tombol Favorit -->\r\n      <button \r\n        @click=\"markAsFavorite\"\r\n        :class=\"{\r\n          'bg-green-500': !isFavorited,\r\n          'bg-gray-400': isFavorited,\r\n        }\"\r\n        class=\"mt-4 px-4 py-2 text-white rounded hover:bg-green-700 transition duration-200\"\r\n        :disabled=\"isFavorited\"\r\n      >\r\n        {{ isFavorited ? 'Favorited' : 'Favorite' }}\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'MoveDetailPopup',\r\n  props: {\r\n    move: Object,\r\n    isVisible: Boolean,\r\n  },\r\n  data() {\r\n    return {\r\n      isFavorited: false, // Status untuk cek apakah sudah favorit atau belum\r\n    };\r\n  },\r\n  methods: {\r\n    close() {\r\n      this.$emit('close');\r\n    },\r\n    formatMoveName(move) {\r\n      // Cek jika move.url ada dan formatnya benar\r\n      if (move && move.name && move.url) {\r\n        // Ekstrak ID dari URL\r\n        const id = move.url.split('/')[6]; // Ambil ID dari URL seperti https://pokeapi.co/api/v2/move/{id}/\r\n        return `${id} - ${this.capitalize(move.name)}`;\r\n      }\r\n\r\n      // Jika ID atau name tidak ditemukan, tampilkan error\r\n      return 'Unknown Move';\r\n    },\r\n\r\n    capitalize(str) {\r\n      if (!str) return '';\r\n      return str.charAt(0).toUpperCase() + str.slice(1);\r\n    },\r\n    async markAsFavorite() {\r\n      if (this.isFavorited) return;\r\n\r\n      const token = localStorage.getItem('token'); \r\n      if (!token) {\r\n        alert('Token tidak ditemukan. Anda harus login terlebih dahulu.');\r\n        return;\r\n      }\r\n\r\n      // console.log('Move object:', this.move);\r\n      const moveId = this.move.url.split('/')[6]; // Ambil ID dari URL\r\n      if (!moveId) {\r\n        alert('ID move tidak ditemukan!');\r\n        return;\r\n      }\r\n\r\n      // console.log('Trying to favorite move with ID:', moveId);\r\n\r\n      // Persiapkan data untuk dikirim ke backend\r\n      const requestData = {\r\n        moveId: moveId,        // Menggunakan moveId yang diambil dari URL\r\n        moveName: this.capitalize(this.move.name),  // Kirim nama move\r\n        moveType: this.move.type,    // Kirim tipe move\r\n      };\r\n\r\n      try {\r\n        const response = await fetch('http://localhost:3000/favorite-moves', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'Authorization': `Bearer ${token}`,  // Mengirim token di header Authorization\r\n          },\r\n          body: JSON.stringify(requestData),\r\n        });\r\n\r\n        const data = await response.json();\r\n        if (response.ok) {\r\n          this.isFavorited = true; // Tandai sebagai favorit\r\n          alert('Move berhasil ditambahkan ke favorit!');\r\n        } else {\r\n          alert('Gagal menambahkan move ke favorit: ' + data.message);\r\n        }\r\n      } catch (err) {\r\n        alert('Terjadi kesalahan saat menambahkan move ke favorit.');\r\n      }\r\n    },\r\n  },\r\n  watch: {\r\n    move: {\r\n      immediate: true,\r\n      handler() {\r\n        this.isFavorited = false;\r\n      },\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* Tambahkan styling jika diperlukan */\r\n</style>\r\n"],"mappings":";;EAAAA,GAAA;EAGIC,KAAK,EAAC;;;EAEDA,KAAK,EAAC;AAAwC;;EAC5CA,KAAK,EAAC;AAAwC;;EAC7CA,KAAK,EAAC;AAAoB;;EAPtCD,GAAA;EAgBmCC,KAAK,EAAC;;;EAhBzCD,GAAA;EAmBkBC,KAAK,EAAC;;;EAIbA,KAAK,EAAC;AAAM;;EAGZA,KAAK,EAAC;AAAM;;EAGZA,KAAK,EAAC;AAAM;oBA7BvB;;SAEUC,MAAA,CAAAC,SAAS,I,cADjBC,mBAAA,CA6CM,OA7CNC,UA6CM,GAzCJC,mBAAA,CAwCM,OAxCNC,UAwCM,GAvCJD,mBAAA,CAQM,OARNE,UAQM,GAPJF,mBAAA,CAA8D,MAA9DG,UAA8D,EAAAC,gBAAA,CAA5BC,QAAA,CAAAC,cAAc,CAACV,MAAA,CAAAW,IAAI,mBACrDP,mBAAA,CAKS;IAJNQ,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEL,QAAA,CAAAM,KAAA,IAAAN,QAAA,CAAAM,KAAA,IAAAD,IAAA,CAAK;IACbf,KAAK,EAAC;KACP,KAED,E,GAGSC,MAAA,CAAAW,IAAI,CAACK,WAAW,I,cAA3Bd,mBAAA,CAEM,OAFNe,UAEM,GADJb,mBAAA,CAA2D,Y,0BAAxDA,mBAAA,CAA6B,gBAArB,cAAY,sBAjB/Bc,gBAAA,CAiBwC,GAAC,GAAAV,gBAAA,CAAGR,MAAA,CAAAW,IAAI,CAACK,WAAW,iB,sBAEtDd,mBAAA,CAEM,OAFNiB,UAEM,EAAAN,MAAA,QAAAA,MAAA,OADJT,mBAAA,CAA8D,YAA3DA,mBAAA,CAA6B,gBAArB,cAAY,GApB/Bc,gBAAA,CAoBwC,4BAA0B,E,yBAG5Dd,mBAAA,CAEM,OAFNgB,UAEM,GADJhB,mBAAA,CAAsD,Y,0BAAnDA,mBAAA,CAAsB,gBAAd,OAAK,sBAxBxBc,gBAAA,CAwBiC,GAAC,GAAAV,gBAAA,CAAGR,MAAA,CAAAW,IAAI,CAACU,IAAI,0B,KAExCjB,mBAAA,CAEM,OAFNkB,UAEM,GADJlB,mBAAA,CAA6E,Y,0BAA1EA,mBAAA,CAAuB,gBAAf,QAAM,sBA3BzBc,gBAAA,CA2BkC,GAAC,GAAAV,gBAAA,CAAGR,MAAA,CAAAW,IAAI,CAACY,KAAK,YAAYvB,MAAA,CAAAW,IAAI,CAACY,KAAK,yB,KAEhEnB,mBAAA,CAEM,OAFNoB,UAEM,GADJpB,mBAAA,CAAsF,Y,0BAAnFA,mBAAA,CAA0B,gBAAlB,WAAS,sBA9B5Bc,gBAAA,CA8BqC,GAAC,GAAAV,gBAAA,CAAGR,MAAA,CAAAW,IAAI,CAACc,QAAQ,YAAYzB,MAAA,CAAAW,IAAI,CAACc,QAAQ,yB,KAGzEC,mBAAA,oBAAuB,EACvBtB,mBAAA,CAUS;IATNQ,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEL,QAAA,CAAAkB,cAAA,IAAAlB,QAAA,CAAAkB,cAAA,IAAAb,IAAA,CAAc;IACrBf,KAAK,EApCd6B,eAAA;uBAoC8CC,KAAA,CAAAC,WAAW;qBAA4BD,KAAA,CAAAC;OAIvE,8EAA8E;IACnFC,QAAQ,EAAEF,KAAA,CAAAC;sBAERD,KAAA,CAAAC,WAAW,2DA3CtBE,WAAA,E,OAAAN,mBAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}