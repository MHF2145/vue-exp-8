{"ast":null,"code":"export default {\n  props: {\n    item: {\n      type: Object,\n      required: true\n    }\n  },\n  data() {\n    return {\n      currentSprite: this.item.sprite,\n      // Item sprite\n      itemEffect: '',\n      // Effect for the item\n      itemCategory: '',\n      // Category for the item\n      itemName: this.item.name,\n      // Item name\n      isFavorited: false // Status of favorited item\n    };\n  },\n  methods: {\n    async fetchItemDetails() {\n      // Fetch item details from the provided URL (assuming the item has a URL)\n      if (this.item.url) {\n        try {\n          const response = await fetch(this.item.url);\n          const data = await response.json();\n          this.itemEffect = data.effect_entries[0]?.effect || 'No effect available';\n          this.itemCategory = data.category.name || 'Unknown';\n          this.itemName = this.item.name || 'Unknown Name'; // Set item name if available\n        } catch (err) {\n          console.error('Error fetching item details:', err);\n        }\n      }\n    },\n    async markAsFavorite() {\n      if (this.isFavorited) return;\n      const token = localStorage.getItem('token');\n      if (!token) {\n        alert('Token tidak ditemukan. Anda harus login terlebih dahulu.');\n        return;\n      }\n\n      // Prepare the data to be sent to the backend\n      const requestData = {\n        itemId: this.item.id,\n        itemName: this.itemName,\n        itemCategory: this.itemCategory\n      };\n      try {\n        const response = await fetch('http://localhost:3000/favorite-items', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n          },\n          body: JSON.stringify(requestData)\n        });\n        const data = await response.json();\n        if (response.ok) {\n          this.isFavorited = true; // Set as favorite\n          alert('Item berhasil ditambahkan ke favorit!');\n        } else {\n          alert('Gagal menambahkan item ke favorit: ' + data.message);\n        }\n      } catch (err) {\n        console.error('Error adding to favorites:', err);\n        alert('Terjadi kesalahan saat menambahkan item ke favorit.');\n      }\n    }\n  },\n  watch: {\n    item: {\n      immediate: true,\n      handler(newItem) {\n        this.currentSprite = newItem.sprite; // Update sprite when item changes\n        this.fetchItemDetails(); // Fetch item details\n        this.isFavorited = false; // Reset favorite status when item changes\n      }\n    }\n  }\n};","map":{"version":3,"names":["props","item","type","Object","required","data","currentSprite","sprite","itemEffect","itemCategory","itemName","name","isFavorited","methods","fetchItemDetails","url","response","fetch","json","effect_entries","effect","category","err","console","error","markAsFavorite","token","localStorage","getItem","alert","requestData","itemId","id","method","headers","body","JSON","stringify","ok","message","watch","immediate","handler","newItem"],"sources":["/Users/hares/Downloads/vue-exp-8-sementara/client/src/components/ItemDetailPopup.vue"],"sourcesContent":["<template>\r\n  <div class=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50\">\r\n      <div class=\"bg-white rounded-lg shadow-lg p-6 w-11/12 md:w-1/2 text-center\">\r\n          <div class=\"flex justify-between items-center\">\r\n              <h2 class=\"text-xl font-semibold\">\r\n                  {{ item.id }} - {{ itemName }}\r\n              </h2>\r\n              <button @click=\"$emit('close')\" class=\"text-red-500\">X</button>\r\n          </div>\r\n          <img :src=\"currentSprite\" :alt=\"item.name\" class=\"sprite my-4 mx-auto\" />\r\n\r\n          <div class=\"mb-4\">\r\n              <p><strong>Category:</strong> {{ itemCategory }}</p>\r\n          </div>\r\n          \r\n          <div class=\"mb-4\">\r\n              <p><strong>Effect:</strong> {{ itemEffect }}</p>\r\n          </div>\r\n\r\n          <!-- Tombol Favorit -->\r\n          <button @click=\"markAsFavorite\"\r\n              :class=\"{\r\n                  'bg-green-500': !isFavorited,\r\n                  'bg-gray-400': isFavorited,\r\n              }\"\r\n              class=\"mt-4 px-4 py-2 text-white rounded hover:bg-green-700 transition duration-200\"\r\n              :disabled=\"isFavorited\">\r\n              {{ isFavorited ? 'Favorited' : 'Favorite' }}\r\n          </button>\r\n      </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n      item: {\r\n          type: Object,\r\n          required: true,\r\n      },\r\n  },\r\n  data() {\r\n      return {\r\n          currentSprite: this.item.sprite, // Item sprite\r\n          itemEffect: '', // Effect for the item\r\n          itemCategory: '', // Category for the item\r\n          itemName: this.item.name, // Item name\r\n          isFavorited: false, // Status of favorited item\r\n      };\r\n  },\r\n  methods: {\r\n      async fetchItemDetails() {\r\n          // Fetch item details from the provided URL (assuming the item has a URL)\r\n          if (this.item.url) {\r\n              try {\r\n                  const response = await fetch(this.item.url);\r\n                  const data = await response.json();\r\n                  this.itemEffect = data.effect_entries[0]?.effect || 'No effect available';\r\n                  this.itemCategory = data.category.name || 'Unknown';\r\n                  this.itemName = this.item.name || 'Unknown Name'; // Set item name if available\r\n              } catch (err) {\r\n                  console.error('Error fetching item details:', err);\r\n              }\r\n          }\r\n      },\r\n\r\n      async markAsFavorite() {\r\n        if (this.isFavorited) return;\r\n\r\n        const token = localStorage.getItem('token');\r\n        \r\n        if (!token) {\r\n            alert('Token tidak ditemukan. Anda harus login terlebih dahulu.');\r\n            return;\r\n        }\r\n\r\n        // Prepare the data to be sent to the backend\r\n        const requestData = {\r\n            itemId: this.item.id,\r\n            itemName: this.itemName,  \r\n            itemCategory: this.itemCategory,  \r\n        };\r\n\r\n        try {\r\n            const response = await fetch('http://localhost:3000/favorite-items', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${token}`,\r\n                },\r\n                body: JSON.stringify(requestData),\r\n            });\r\n\r\n            const data = await response.json();\r\n            if (response.ok) {\r\n                this.isFavorited = true; // Set as favorite\r\n                alert('Item berhasil ditambahkan ke favorit!');\r\n            } else {\r\n                alert('Gagal menambahkan item ke favorit: ' + data.message);\r\n            }\r\n        } catch (err) {\r\n            console.error('Error adding to favorites:', err);\r\n            alert('Terjadi kesalahan saat menambahkan item ke favorit.');\r\n        }\r\n    },\r\n  },\r\n  watch: {\r\n      item: {\r\n          immediate: true,\r\n          handler(newItem) {\r\n              this.currentSprite = newItem.sprite; // Update sprite when item changes\r\n              this.fetchItemDetails(); // Fetch item details\r\n              this.isFavorited = false; // Reset favorite status when item changes\r\n          },\r\n      },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.fixed {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n}\r\n\r\n.sprite {\r\n  width: 3cm;\r\n  height: 3cm;\r\n  object-fit: contain;\r\n}\r\n\r\n.favorite-btn {\r\n  cursor: pointer;\r\n}\r\n\r\n.popup-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.7);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 50;\r\n}\r\n\r\n.popup-content {\r\n  background: white;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  width: 300px;\r\n  max-width: 90%;\r\n  text-align: center;\r\n  position: relative;\r\n}\r\n\r\n.close-btn {\r\n  position: absolute;\r\n  top: 10px;\r\n  right: 10px;\r\n  background: transparent;\r\n  border: none;\r\n  font-size: 1.5rem;\r\n  cursor: pointer;\r\n}\r\n</style>\r\n"],"mappings":"AAkCA,eAAe;EACbA,KAAK,EAAE;IACHC,IAAI,EAAE;MACFC,IAAI,EAAEC,MAAM;MACZC,QAAQ,EAAE;IACd;EACJ,CAAC;EACDC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,aAAa,EAAE,IAAI,CAACL,IAAI,CAACM,MAAM;MAAE;MACjCC,UAAU,EAAE,EAAE;MAAE;MAChBC,YAAY,EAAE,EAAE;MAAE;MAClBC,QAAQ,EAAE,IAAI,CAACT,IAAI,CAACU,IAAI;MAAE;MAC1BC,WAAW,EAAE,KAAK,CAAE;IACxB,CAAC;EACL,CAAC;EACDC,OAAO,EAAE;IACL,MAAMC,gBAAgBA,CAAA,EAAG;MACrB;MACA,IAAI,IAAI,CAACb,IAAI,CAACc,GAAG,EAAE;QACf,IAAI;UACA,MAAMC,QAAO,GAAI,MAAMC,KAAK,CAAC,IAAI,CAAChB,IAAI,CAACc,GAAG,CAAC;UAC3C,MAAMV,IAAG,GAAI,MAAMW,QAAQ,CAACE,IAAI,CAAC,CAAC;UAClC,IAAI,CAACV,UAAS,GAAIH,IAAI,CAACc,cAAc,CAAC,CAAC,CAAC,EAAEC,MAAK,IAAK,qBAAqB;UACzE,IAAI,CAACX,YAAW,GAAIJ,IAAI,CAACgB,QAAQ,CAACV,IAAG,IAAK,SAAS;UACnD,IAAI,CAACD,QAAO,GAAI,IAAI,CAACT,IAAI,CAACU,IAAG,IAAK,cAAc,EAAE;QACtD,EAAE,OAAOW,GAAG,EAAE;UACVC,OAAO,CAACC,KAAK,CAAC,8BAA8B,EAAEF,GAAG,CAAC;QACtD;MACJ;IACJ,CAAC;IAED,MAAMG,cAAcA,CAAA,EAAG;MACrB,IAAI,IAAI,CAACb,WAAW,EAAE;MAEtB,MAAMc,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MAE3C,IAAI,CAACF,KAAK,EAAE;QACRG,KAAK,CAAC,0DAA0D,CAAC;QACjE;MACJ;;MAEA;MACA,MAAMC,WAAU,GAAI;QAChBC,MAAM,EAAE,IAAI,CAAC9B,IAAI,CAAC+B,EAAE;QACpBtB,QAAQ,EAAE,IAAI,CAACA,QAAQ;QACvBD,YAAY,EAAE,IAAI,CAACA;MACvB,CAAC;MAED,IAAI;QACA,MAAMO,QAAO,GAAI,MAAMC,KAAK,CAAC,sCAAsC,EAAE;UACjEgB,MAAM,EAAE,MAAM;UACdC,OAAO,EAAE;YACL,cAAc,EAAE,kBAAkB;YAClC,eAAe,EAAE,UAAUR,KAAK;UACpC,CAAC;UACDS,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACP,WAAW;QACpC,CAAC,CAAC;QAEF,MAAMzB,IAAG,GAAI,MAAMW,QAAQ,CAACE,IAAI,CAAC,CAAC;QAClC,IAAIF,QAAQ,CAACsB,EAAE,EAAE;UACb,IAAI,CAAC1B,WAAU,GAAI,IAAI,EAAE;UACzBiB,KAAK,CAAC,uCAAuC,CAAC;QAClD,OAAO;UACHA,KAAK,CAAC,qCAAoC,GAAIxB,IAAI,CAACkC,OAAO,CAAC;QAC/D;MACJ,EAAE,OAAOjB,GAAG,EAAE;QACVC,OAAO,CAACC,KAAK,CAAC,4BAA4B,EAAEF,GAAG,CAAC;QAChDO,KAAK,CAAC,qDAAqD,CAAC;MAChE;IACJ;EACF,CAAC;EACDW,KAAK,EAAE;IACHvC,IAAI,EAAE;MACFwC,SAAS,EAAE,IAAI;MACfC,OAAOA,CAACC,OAAO,EAAE;QACb,IAAI,CAACrC,aAAY,GAAIqC,OAAO,CAACpC,MAAM,EAAE;QACrC,IAAI,CAACO,gBAAgB,CAAC,CAAC,EAAE;QACzB,IAAI,CAACF,WAAU,GAAI,KAAK,EAAE;MAC9B;IACJ;EACJ;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}