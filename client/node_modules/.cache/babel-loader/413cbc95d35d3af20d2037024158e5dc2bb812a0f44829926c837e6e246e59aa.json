{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50\"\n};\nconst _hoisted_2 = {\n  class: \"bg-white rounded-lg shadow-lg p-6 w-11/12 md:w-1/2 text-center\"\n};\nconst _hoisted_3 = {\n  class: \"flex justify-between items-center\"\n};\nconst _hoisted_4 = {\n  class: \"text-xl font-semibold\"\n};\nconst _hoisted_5 = [\"src\", \"alt\"];\nconst _hoisted_6 = {\n  class: \"mb-4\"\n};\nconst _hoisted_7 = {\n  class: \"mb-4\"\n};\nconst _hoisted_8 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"h2\", _hoisted_4, _toDisplayString($props.item.id) + \" - \" + _toDisplayString($data.itemName), 1), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = $event => _ctx.$emit('close')),\n    class: \"text-red-500\"\n  }, \"X\")]), _createElementVNode(\"img\", {\n    src: $data.currentSprite,\n    alt: $props.item.name,\n    class: \"sprite my-4 mx-auto\"\n  }, null, 8, _hoisted_5), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"p\", null, [_cache[2] || (_cache[2] = _createElementVNode(\"strong\", null, \"Category:\", -1)), _createTextVNode(\" \" + _toDisplayString($data.itemCategory), 1)])]), _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"p\", null, [_cache[3] || (_cache[3] = _createElementVNode(\"strong\", null, \"Effect:\", -1)), _createTextVNode(\" \" + _toDisplayString($data.itemEffect), 1)])]), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.markAsFavorite && $options.markAsFavorite(...args)),\n    class: _normalizeClass([{\n      'bg-green-500': !$data.isFavorited,\n      'bg-gray-400': $data.isFavorited\n    }, \"mt-4 px-4 py-2 text-white rounded hover:bg-green-700 transition duration-200\"]),\n    disabled: $data.isFavorited\n  }, _toDisplayString($data.isFavorited ? 'Favorited' : 'Favorite'), 11, _hoisted_8)])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_toDisplayString","$props","item","id","$data","itemName","onClick","_cache","$event","_ctx","$emit","src","currentSprite","alt","name","_hoisted_5","_hoisted_6","_createTextVNode","itemCategory","_hoisted_7","itemEffect","args","$options","markAsFavorite","_normalizeClass","isFavorited","disabled","_hoisted_8"],"sources":["/Users/hares/Downloads/vue-exp-8-sementara/client/src/components/ItemDetailPopup.vue"],"sourcesContent":["<template>\r\n  <div class=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50\">\r\n      <div class=\"bg-white rounded-lg shadow-lg p-6 w-11/12 md:w-1/2 text-center\">\r\n          <div class=\"flex justify-between items-center\">\r\n              <h2 class=\"text-xl font-semibold\">\r\n                  {{ item.id }} - {{ itemName }}\r\n              </h2>\r\n              <button @click=\"$emit('close')\" class=\"text-red-500\">X</button>\r\n          </div>\r\n          <img :src=\"currentSprite\" :alt=\"item.name\" class=\"sprite my-4 mx-auto\" />\r\n\r\n          <div class=\"mb-4\">\r\n              <p><strong>Category:</strong> {{ itemCategory }}</p>\r\n          </div>\r\n          \r\n          <div class=\"mb-4\">\r\n              <p><strong>Effect:</strong> {{ itemEffect }}</p>\r\n          </div>\r\n\r\n          <!-- Tombol Favorit -->\r\n          <button @click=\"markAsFavorite\"\r\n              :class=\"{\r\n                  'bg-green-500': !isFavorited,\r\n                  'bg-gray-400': isFavorited,\r\n              }\"\r\n              class=\"mt-4 px-4 py-2 text-white rounded hover:bg-green-700 transition duration-200\"\r\n              :disabled=\"isFavorited\">\r\n              {{ isFavorited ? 'Favorited' : 'Favorite' }}\r\n          </button>\r\n      </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  props: {\r\n      item: {\r\n          type: Object,\r\n          required: true,\r\n      },\r\n  },\r\n  data() {\r\n      return {\r\n          currentSprite: this.item.sprite, // Item sprite\r\n          itemEffect: '', // Effect for the item\r\n          itemCategory: '', // Category for the item\r\n          itemName: this.item.name, // Item name\r\n          isFavorited: false, // Status of favorited item\r\n      };\r\n  },\r\n  methods: {\r\n      async fetchItemDetails() {\r\n          // Fetch item details from the provided URL (assuming the item has a URL)\r\n          if (this.item.url) {\r\n              try {\r\n                  const response = await fetch(this.item.url);\r\n                  const data = await response.json();\r\n                  this.itemEffect = data.effect_entries[0]?.effect || 'No effect available';\r\n                  this.itemCategory = data.category.name || 'Unknown';\r\n                  this.itemName = this.item.name || 'Unknown Name'; // Set item name if available\r\n              } catch (err) {\r\n                  console.error('Error fetching item details:', err);\r\n              }\r\n          }\r\n      },\r\n\r\n      async markAsFavorite() {\r\n        if (this.isFavorited) return;\r\n\r\n        const token = localStorage.getItem('token');\r\n        \r\n        if (!token) {\r\n            alert('Token tidak ditemukan. Anda harus login terlebih dahulu.');\r\n            return;\r\n        }\r\n\r\n        // Prepare the data to be sent to the backend\r\n        const requestData = {\r\n            itemId: this.item.id,\r\n            itemName: this.itemName,  \r\n            itemCategory: this.itemCategory,  \r\n        };\r\n\r\n        try {\r\n            const response = await fetch('http://localhost:3000/favorite-items', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'Authorization': `Bearer ${token}`,\r\n                },\r\n                body: JSON.stringify(requestData),\r\n            });\r\n\r\n            const data = await response.json();\r\n            if (response.ok) {\r\n                this.isFavorited = true; // Set as favorite\r\n                alert('Item berhasil ditambahkan ke favorit!');\r\n            } else {\r\n                alert('Gagal menambahkan item ke favorit: ' + data.message);\r\n            }\r\n        } catch (err) {\r\n            console.error('Error adding to favorites:', err);\r\n            alert('Terjadi kesalahan saat menambahkan item ke favorit.');\r\n        }\r\n    },\r\n  },\r\n  watch: {\r\n      item: {\r\n          immediate: true,\r\n          handler(newItem) {\r\n              this.currentSprite = newItem.sprite; // Update sprite when item changes\r\n              this.fetchItemDetails(); // Fetch item details\r\n              this.isFavorited = false; // Reset favorite status when item changes\r\n          },\r\n      },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.fixed {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n}\r\n\r\n.sprite {\r\n  width: 3cm;\r\n  height: 3cm;\r\n  object-fit: contain;\r\n}\r\n\r\n.favorite-btn {\r\n  cursor: pointer;\r\n}\r\n\r\n.popup-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.7);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 50;\r\n}\r\n\r\n.popup-content {\r\n  background: white;\r\n  padding: 20px;\r\n  border-radius: 8px;\r\n  width: 300px;\r\n  max-width: 90%;\r\n  text-align: center;\r\n  position: relative;\r\n}\r\n\r\n.close-btn {\r\n  position: absolute;\r\n  top: 10px;\r\n  right: 10px;\r\n  background: transparent;\r\n  border: none;\r\n  font-size: 1.5rem;\r\n  cursor: pointer;\r\n}\r\n</style>\r\n"],"mappings":";;EACOA,KAAK,EAAC;AAAuE;;EACzEA,KAAK,EAAC;AAAgE;;EAClEA,KAAK,EAAC;AAAmC;;EACtCA,KAAK,EAAC;AAAuB;mBAJ/C;;EAWeA,KAAK,EAAC;AAAM;;EAIZA,KAAK,EAAC;AAAM;mBAf3B;;uBACEC,mBAAA,CA6BM,OA7BNC,UA6BM,GA5BFC,mBAAA,CA2BM,OA3BNC,UA2BM,GA1BFD,mBAAA,CAKM,OALNE,UAKM,GAJFF,mBAAA,CAEK,MAFLG,UAEK,EAAAC,gBAAA,CADEC,MAAA,CAAAC,IAAI,CAACC,EAAE,IAAG,KAAG,GAAAH,gBAAA,CAAGI,KAAA,CAAAC,QAAQ,OAE/BT,mBAAA,CAA+D;IAAtDU,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,IAAA,CAAAC,KAAK;IAAWjB,KAAK,EAAC;KAAe,GAAC,E,GAE1DG,mBAAA,CAAyE;IAAnEe,GAAG,EAAEP,KAAA,CAAAQ,aAAa;IAAGC,GAAG,EAAEZ,MAAA,CAAAC,IAAI,CAACY,IAAI;IAAErB,KAAK,EAAC;cAT3DsB,UAAA,GAWUnB,mBAAA,CAEM,OAFNoB,UAEM,GADFpB,mBAAA,CAAoD,Y,0BAAjDA,mBAAA,CAA0B,gBAAlB,WAAS,QAZlCqB,gBAAA,CAY2C,GAAC,GAAAjB,gBAAA,CAAGI,KAAA,CAAAc,YAAY,M,KAGjDtB,mBAAA,CAEM,OAFNuB,UAEM,GADFvB,mBAAA,CAAgD,Y,0BAA7CA,mBAAA,CAAwB,gBAAhB,SAAO,QAhBhCqB,gBAAA,CAgByC,GAAC,GAAAjB,gBAAA,CAAGI,KAAA,CAAAgB,UAAU,M,KAI7CxB,mBAAA,CAQS;IARAU,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAc,IAAA,KAAEC,QAAA,CAAAC,cAAA,IAAAD,QAAA,CAAAC,cAAA,IAAAF,IAAA,CAAc;IACzB5B,KAAK,EArBpB+B,eAAA;uBAqB4DpB,KAAA,CAAAqB,WAAW;qBAAoCrB,KAAA,CAAAqB;OAIvF,8EAA8E;IACnFC,QAAQ,EAAEtB,KAAA,CAAAqB;sBACRrB,KAAA,CAAAqB,WAAW,kCA3B5BE,UAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}